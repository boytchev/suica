<!DOCTYPE html>
<html lang="en">

<head>
	<title>Screen position &ndash; local coordinates</title>
	<script src="example.js"></script>
	<script src="suica.js"></script>
</head>

<body>

	<h1>Screen position &ndash; local coordinates</h1>
	<p>Getting the screen position from object local coordinates.</p>

	<suica ontime="onTime">
		<demo>
		<pyramid id="p" count="4" width="40" height="40" y="-10">
		<div id="a" class="label">A</div>
		<div id="b" class="label">B</div>
		<div id="c" class="label">C</div>
		<div id="d" class="label">D</div>
		<div id="e" class="label">E</div>
		<div id="e1" class="label">E'</div>
		<div id="e2" class="label">E"</div>
	</suica>

	<script>
	
		// function to center an element on given position
		function setPos( label, offset )
		{
			var elem = element( label );
		
			var pos = p.screenPosition( offset );
			elem.style.left = ( pos[ 0 ]-elem.clientWidth/2 )+'px';
			elem.style.top = ( pos[ 1 ]-elem.clientHeight/2 )+'px';
		}
		
		function onTime( t )
		{
			p.spinH = 180*Math.sin( 0.4*t );
			p.spinV = 90*Math.cos( 0.7**t );
			p.spinT = 180*Math.sin( 0.2*t );
		
			setPos( 'a', [ 20, 0, 0 ]);
			setPos( 'b', [ 0, 0, 20 ]);
			setPos( 'c', [ -20, 0, 0 ]);
			setPos( 'd', [ 0, 0, -20 ]);
			setPos( 'e', [ 0, 40, 0 ]);
			setPos( 'e1', [ 0, 47, 0 ]);
			setPos( 'e2', [ 0, 54, 0 ]);
		}
		
	</script>
	
</body>
</html>