<!DOCTYPE html>
<html lang="en">

<head>
	<title>Shape and Drawing</title>
	<script src="example.js"></script>
	<script src="suica.js"></script>
</head>

<body>

	<h1>Shape and Drawing</h1>
	<p>Using shapes and drawing in the same code.</p>

	<suica></suica>
	
	<script>
		
		var pic = drawing( 64, 64, 'lightgray' );
		moveTo( 22, 32 );
		curveTo( 2, 62, 32, 42 );
		curveTo( 62, 62, 42, 32 );
		curveTo( 62, 2, 32, 22 );
		curveTo( 2, 2, 22, 32 );
		fill( 'lightsalmon' );
		stroke( 'black', 2 );

		var a = cube([ 0, 0, 0 ], 10, 'white' );
		its.image = pic;
		
		var path = shape( 150 );
		moveTo( -15, 0 );
		curveTo( -45, 45, 0, 15 );
		curveTo( 45, 45, 15, 0 );
		curveTo( 45, -45, 0, -15 );
		curveTo( -45, -45, -15, 0 );
		
		var v = path.vertices,
			n = v.length;

		for ( var i = 0; i<n; i++ ) line( v[ i ], v[ ( i+1 )%n ]);
		
		var cubes = [];
		for ( var i=0; i<10; i++ )
		{
			cubes.push( a.clone );
			its.center = v[ Math.round( i/10*n ) ];
		}
		
		a.visible = false;
		
		suica.ontime = function ( t )
		{
			for ( var i =0; i<10; i++ )
			{
				cubes[ i ].center = v[ Math.round( i/10*n+50*t )%n ];
				cubes[ i ].spinH = 20*i+200*t;
			}
		};
		
	</script>
	
</body>
</html>