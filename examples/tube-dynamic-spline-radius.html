<!DOCTYPE html>
<html lang="en">

<head>
	<title>Dynamic tube spline radius</title>
	<script src="example.js"></script>
	<script src="suica.js"></script>
</head>

<body>

	<h1>Dynamic tube spline radius</h1>
	<p>Changing the radius of a tube in the spline of its curve.</p>

	<suica>
	</suica>

	<script>
	
		var time = 0;
		
		function screw( u )
		{
			return [
				80*u-40,
				20*Math.sin( 40*u ),
				20*Math.cos( 40*u ),
				0.5+3.5*Math.pow( 0.5+0.5*Math.cos( 60*u+3*time+3*Math.sin( 2*u+time ) ), 10 )
			];
		}
		
		spiral = tube([ 0, 0, 0 ], screw, 1, 400 );
		
		suica.ontime = function ( t )
		{
			time = t;
			spiral.radius = 0; // activates recalculation of the tube
		};
		
	</script>
	
</body>
</html>